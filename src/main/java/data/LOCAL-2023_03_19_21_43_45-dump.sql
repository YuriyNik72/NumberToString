--
-- PostgreSQL database dump
--

-- Dumped from database version 15.0 (Debian 15.0-1.pgdg110+1)
-- Dumped by pg_dump version 15.2 (Homebrew)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: university_db; Type: DATABASE; Schema: -; Owner: postgres
--

CREATE DATABASE university_db WITH TEMPLATE = template0 ENCODING = 'UTF8' LOCALE_PROVIDER = libc LOCALE = 'en_US.utf8';


ALTER DATABASE university_db OWNER TO postgres;

\connect university_db

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: schedule; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA schedule;


ALTER SCHEMA schedule OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: classroom; Type: TABLE; Schema: schedule; Owner: postgres
--

CREATE TABLE schedule.classroom (
    id integer NOT NULL,
    university_id integer NOT NULL,
    classroom_name text
);


ALTER TABLE schedule.classroom OWNER TO postgres;

--
-- Name: classroom_id_seq; Type: SEQUENCE; Schema: schedule; Owner: postgres
--

ALTER TABLE schedule.classroom ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME schedule.classroom_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: course; Type: TABLE; Schema: schedule; Owner: postgres
--

CREATE TABLE schedule.course (
    year_of_study integer NOT NULL,
    type_of_study text NOT NULL
);


ALTER TABLE schedule.course OWNER TO postgres;

--
-- Name: curriculum; Type: TABLE; Schema: schedule; Owner: postgres
--

CREATE TABLE schedule.curriculum (
    id integer NOT NULL,
    year_of_study integer,
    type_of_study text,
    discipline_id integer NOT NULL,
    hours_amount integer NOT NULL
);


ALTER TABLE schedule.curriculum OWNER TO postgres;

--
-- Name: curriculum_id_seq; Type: SEQUENCE; Schema: schedule; Owner: postgres
--

ALTER TABLE schedule.curriculum ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME schedule.curriculum_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: day_of_week; Type: TABLE; Schema: schedule; Owner: postgres
--

CREATE TABLE schedule.day_of_week (
    day_of_week integer NOT NULL,
    day_of_week_text text NOT NULL
);


ALTER TABLE schedule.day_of_week OWNER TO postgres;

--
-- Name: day_of_week_day_of_week_seq; Type: SEQUENCE; Schema: schedule; Owner: postgres
--

ALTER TABLE schedule.day_of_week ALTER COLUMN day_of_week ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME schedule.day_of_week_day_of_week_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: discipline; Type: TABLE; Schema: schedule; Owner: postgres
--

CREATE TABLE schedule.discipline (
    id integer NOT NULL,
    discipline_name text
);


ALTER TABLE schedule.discipline OWNER TO postgres;

--
-- Name: discipline_id_seq; Type: SEQUENCE; Schema: schedule; Owner: postgres
--

ALTER TABLE schedule.discipline ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME schedule.discipline_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ring_schedule; Type: TABLE; Schema: schedule; Owner: postgres
--

CREATE TABLE schedule.ring_schedule (
    id integer NOT NULL,
    lesson_start time without time zone NOT NULL,
    lesson_end time without time zone,
    CONSTRAINT check_name CHECK ((lesson_start < lesson_end))
);


ALTER TABLE schedule.ring_schedule OWNER TO postgres;

--
-- Name: ring_schedule_id_seq; Type: SEQUENCE; Schema: schedule; Owner: postgres
--

ALTER TABLE schedule.ring_schedule ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME schedule.ring_schedule_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: schedule; Type: TABLE; Schema: schedule; Owner: postgres
--

CREATE TABLE schedule.schedule (
    id integer NOT NULL,
    day_of_week integer,
    teacher_id integer,
    student_group_id integer,
    ring_schedule_id integer,
    discipline_id integer,
    classroom_id integer
);


ALTER TABLE schedule.schedule OWNER TO postgres;

--
-- Name: schedule_id_seq; Type: SEQUENCE; Schema: schedule; Owner: postgres
--

ALTER TABLE schedule.schedule ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME schedule.schedule_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: student_group; Type: TABLE; Schema: schedule; Owner: postgres
--

CREATE TABLE schedule.student_group (
    id bigint NOT NULL,
    group_name text,
    year_of_study integer,
    type_of_study text
);


ALTER TABLE schedule.student_group OWNER TO postgres;

--
-- Name: student_group_id_seq; Type: SEQUENCE; Schema: schedule; Owner: postgres
--

ALTER TABLE schedule.student_group ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME schedule.student_group_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: teacher; Type: TABLE; Schema: schedule; Owner: postgres
--

CREATE TABLE schedule.teacher (
    id integer NOT NULL,
    full_name text,
    discipline_id integer NOT NULL
);


ALTER TABLE schedule.teacher OWNER TO postgres;

--
-- Name: teacher_id_seq; Type: SEQUENCE; Schema: schedule; Owner: postgres
--

ALTER TABLE schedule.teacher ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME schedule.teacher_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: university; Type: TABLE; Schema: schedule; Owner: postgres
--

CREATE TABLE schedule.university (
    id integer NOT NULL,
    name text NOT NULL
);


ALTER TABLE schedule.university OWNER TO postgres;

--
-- Name: university_id_seq; Type: SEQUENCE; Schema: schedule; Owner: postgres
--

ALTER TABLE schedule.university ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME schedule.university_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: classroom; Type: TABLE DATA; Schema: schedule; Owner: postgres
--

COPY schedule.classroom (id, university_id, classroom_name) FROM stdin;
1	1	I
3	1	III
2	1	II
5	1	IV
\.


--
-- Data for Name: course; Type: TABLE DATA; Schema: schedule; Owner: postgres
--

COPY schedule.course (year_of_study, type_of_study) FROM stdin;
1	bachelor's degree
2	bachelor's degree
3	bachelor's degree
4	bachelor's degree
1	specialist
2	specialist
3	specialist
4	specialist
5	specialist
6	specialist
\.


--
-- Data for Name: curriculum; Type: TABLE DATA; Schema: schedule; Owner: postgres
--

COPY schedule.curriculum (id, year_of_study, type_of_study, discipline_id, hours_amount) FROM stdin;
1	1	bachelor's degree	4	10
1	1	bachelor's degree	3	10
1	1	bachelor's degree	2	10
2	2	bachelor's degree	2	12
2	2	bachelor's degree	4	11
2	2	bachelor's degree	3	7
\.


--
-- Data for Name: day_of_week; Type: TABLE DATA; Schema: schedule; Owner: postgres
--

COPY schedule.day_of_week (day_of_week, day_of_week_text) FROM stdin;
1	Monday
2	Tuesday
3	Wednesday
4	Thursday
5	Friday
6	Saturday
7	Sunday
\.


--
-- Data for Name: discipline; Type: TABLE DATA; Schema: schedule; Owner: postgres
--

COPY schedule.discipline (id, discipline_name) FROM stdin;
2	Russian language
3	Maths
4	Physics
\.


--
-- Data for Name: ring_schedule; Type: TABLE DATA; Schema: schedule; Owner: postgres
--

COPY schedule.ring_schedule (id, lesson_start, lesson_end) FROM stdin;
2	08:30:00	10:00:00
3	10:10:00	11:40:00
4	12:00:00	13:30:00
5	13:40:00	15:10:00
6	15:20:00	16:50:00
7	17:00:00	18:30:00
8	18:40:00	20:10:00
\.


--
-- Data for Name: schedule; Type: TABLE DATA; Schema: schedule; Owner: postgres
--

COPY schedule.schedule (id, day_of_week, teacher_id, student_group_id, ring_schedule_id, discipline_id, classroom_id) FROM stdin;
3	1	1	1	2	4	1
\.


--
-- Data for Name: student_group; Type: TABLE DATA; Schema: schedule; Owner: postgres
--

COPY schedule.student_group (id, group_name, year_of_study, type_of_study) FROM stdin;
1	A	1	bachelor's degree
2	B	1	bachelor's degree
3	C	1	bachelor's degree
4	A	2	bachelor's degree
\.


--
-- Data for Name: teacher; Type: TABLE DATA; Schema: schedule; Owner: postgres
--

COPY schedule.teacher (id, full_name, discipline_id) FROM stdin;
3	Mikhail Lomonosov	2
1	Albert Einstein	4
2	Blaise Pascal	3
4	Russian teacher 2	2
5	Maths teacher 2	3
6	Physics teacher 2	4
\.


--
-- Data for Name: university; Type: TABLE DATA; Schema: schedule; Owner: postgres
--

COPY schedule.university (id, name) FROM stdin;
1	Very famous university
\.


--
-- Name: classroom_id_seq; Type: SEQUENCE SET; Schema: schedule; Owner: postgres
--

SELECT pg_catalog.setval('schedule.classroom_id_seq', 5, true);


--
-- Name: curriculum_id_seq; Type: SEQUENCE SET; Schema: schedule; Owner: postgres
--

SELECT pg_catalog.setval('schedule.curriculum_id_seq', 1, false);


--
-- Name: day_of_week_day_of_week_seq; Type: SEQUENCE SET; Schema: schedule; Owner: postgres
--

SELECT pg_catalog.setval('schedule.day_of_week_day_of_week_seq', 7, true);


--
-- Name: discipline_id_seq; Type: SEQUENCE SET; Schema: schedule; Owner: postgres
--

SELECT pg_catalog.setval('schedule.discipline_id_seq', 4, true);


--
-- Name: ring_schedule_id_seq; Type: SEQUENCE SET; Schema: schedule; Owner: postgres
--

SELECT pg_catalog.setval('schedule.ring_schedule_id_seq', 8, true);


--
-- Name: schedule_id_seq; Type: SEQUENCE SET; Schema: schedule; Owner: postgres
--

SELECT pg_catalog.setval('schedule.schedule_id_seq', 7, true);


--
-- Name: student_group_id_seq; Type: SEQUENCE SET; Schema: schedule; Owner: postgres
--

SELECT pg_catalog.setval('schedule.student_group_id_seq', 5, true);


--
-- Name: teacher_id_seq; Type: SEQUENCE SET; Schema: schedule; Owner: postgres
--

SELECT pg_catalog.setval('schedule.teacher_id_seq', 6, true);


--
-- Name: university_id_seq; Type: SEQUENCE SET; Schema: schedule; Owner: postgres
--

SELECT pg_catalog.setval('schedule.university_id_seq', 1, true);


--
-- Name: classroom classroom_pk; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.classroom
    ADD CONSTRAINT classroom_pk PRIMARY KEY (id);


--
-- Name: course course_pk; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.course
    ADD CONSTRAINT course_pk PRIMARY KEY (year_of_study, type_of_study);


--
-- Name: curriculum curriculum_pk; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.curriculum
    ADD CONSTRAINT curriculum_pk PRIMARY KEY (id, discipline_id);


--
-- Name: day_of_week day_of_week_pk; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.day_of_week
    ADD CONSTRAINT day_of_week_pk PRIMARY KEY (day_of_week);


--
-- Name: discipline discipline_pk; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.discipline
    ADD CONSTRAINT discipline_pk PRIMARY KEY (id);


--
-- Name: ring_schedule ring_schedule_pk; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.ring_schedule
    ADD CONSTRAINT ring_schedule_pk PRIMARY KEY (id);


--
-- Name: schedule schedule_pk; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.schedule
    ADD CONSTRAINT schedule_pk PRIMARY KEY (id);


--
-- Name: student_group student_group_pk; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.student_group
    ADD CONSTRAINT student_group_pk PRIMARY KEY (id);


--
-- Name: student_group student_group_pk2; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.student_group
    ADD CONSTRAINT student_group_pk2 UNIQUE (group_name, year_of_study, type_of_study);


--
-- Name: teacher teacher_pk; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.teacher
    ADD CONSTRAINT teacher_pk PRIMARY KEY (id, discipline_id);


--
-- Name: university university_pk; Type: CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.university
    ADD CONSTRAINT university_pk PRIMARY KEY (id);


--
-- Name: busy_classroom_constraint; Type: INDEX; Schema: schedule; Owner: postgres
--

CREATE UNIQUE INDEX busy_classroom_constraint ON schedule.schedule USING btree (day_of_week, ring_schedule_id, classroom_id);


--
-- Name: busy_student_group_constraint; Type: INDEX; Schema: schedule; Owner: postgres
--

CREATE UNIQUE INDEX busy_student_group_constraint ON schedule.schedule USING btree (day_of_week, student_group_id, ring_schedule_id);


--
-- Name: busy_teacher_constraint; Type: INDEX; Schema: schedule; Owner: postgres
--

CREATE UNIQUE INDEX busy_teacher_constraint ON schedule.schedule USING btree (day_of_week, teacher_id, ring_schedule_id);


--
-- Name: classroom_university_id_classroom_name_uindex; Type: INDEX; Schema: schedule; Owner: postgres
--

CREATE UNIQUE INDEX classroom_university_id_classroom_name_uindex ON schedule.classroom USING btree (university_id, classroom_name);


--
-- Name: classroom classroom_university_id_fk; Type: FK CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.classroom
    ADD CONSTRAINT classroom_university_id_fk FOREIGN KEY (university_id) REFERENCES schedule.university(id);


--
-- Name: curriculum curriculum_course_year_of_study_type_of_study_fk; Type: FK CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.curriculum
    ADD CONSTRAINT curriculum_course_year_of_study_type_of_study_fk FOREIGN KEY (year_of_study, type_of_study) REFERENCES schedule.course(year_of_study, type_of_study);


--
-- Name: curriculum curriculum_discipline_id_fk; Type: FK CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.curriculum
    ADD CONSTRAINT curriculum_discipline_id_fk FOREIGN KEY (discipline_id) REFERENCES schedule.discipline(id);


--
-- Name: schedule schedule___fk; Type: FK CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.schedule
    ADD CONSTRAINT schedule___fk FOREIGN KEY (classroom_id) REFERENCES schedule.classroom(id);


--
-- Name: schedule schedule_day_of_week_day_of_week_fk; Type: FK CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.schedule
    ADD CONSTRAINT schedule_day_of_week_day_of_week_fk FOREIGN KEY (day_of_week) REFERENCES schedule.day_of_week(day_of_week);


--
-- Name: schedule schedule_ring_schedule_id_fk; Type: FK CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.schedule
    ADD CONSTRAINT schedule_ring_schedule_id_fk FOREIGN KEY (ring_schedule_id) REFERENCES schedule.ring_schedule(id);


--
-- Name: schedule schedule_student_group_id_fk; Type: FK CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.schedule
    ADD CONSTRAINT schedule_student_group_id_fk FOREIGN KEY (student_group_id) REFERENCES schedule.student_group(id);


--
-- Name: schedule schedule_teacher_id_discipline_id_fk; Type: FK CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.schedule
    ADD CONSTRAINT schedule_teacher_id_discipline_id_fk FOREIGN KEY (teacher_id, discipline_id) REFERENCES schedule.teacher(id, discipline_id);


--
-- Name: student_group student_group___fk; Type: FK CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.student_group
    ADD CONSTRAINT student_group___fk FOREIGN KEY (type_of_study, year_of_study) REFERENCES schedule.course(type_of_study, year_of_study);


--
-- Name: teacher teacher_discipline_id_fk; Type: FK CONSTRAINT; Schema: schedule; Owner: postgres
--

ALTER TABLE ONLY schedule.teacher
    ADD CONSTRAINT teacher_discipline_id_fk FOREIGN KEY (discipline_id) REFERENCES schedule.discipline(id);


--
-- PostgreSQL database dump complete
--

